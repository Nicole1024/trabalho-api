<!DOCTYPE HTML>
<html lang="pt-BR">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Trabalho API - Informa√ß√µes do Espa√ßo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <a href="index.html">NASA APOD & Asteroides</a>
            <a href="page2.html" class="active">Informa√ß√µes do Espa√ßo (APIs 2)</a>
        </nav>
    </header>

    <main>
        <h1>Mais Informa√ß√µes sobre o Espa√ßo</h1>

        <section id="swapi-section">
            <h2>üöÄ Fato Curioso do Universo Star Wars (API 1/3)</h2>
            <p>Clique no bot√£o para carregar um fato aleat√≥rio sobre um planeta do universo Star Wars.</p>
            <input type="button" value="Buscar Fato" id="buscarSW"><br>
            <div id="mostraSW" class="api-output"></div>
        </section>

        <hr>

        <section id="lancamento-section">
            <h2>üõ∞Ô∏è Pr√≥ximo Grande Lan√ßamento Espacial (API 2/3)</h2>
            <p>Veja os detalhes do pr√≥ximo lan√ßamento de foguete confirmado no mundo.</p>
            <input type="button" value="Buscar Lan√ßamento" id="buscarLancamento"><br>
            <div id="mostraLancamento" class="api-output"></div>
        </section>
        
        <hr>

        <section id="noticias-section">
            <h2>üì∞ Not√≠cia Espacial do Momento (API 3/3)</h2>
            <p>Leia a manchete e o resumo da not√≠cia espacial mais recente.</p>
            <input type="button" value="Buscar Not√≠cia" id="buscarNoticias"><br>
            <div id="mostraNoticias" class="api-output"></div>
        </section>

        <script>
            
            // FUN√á√ïES DE TRADU√á√ÉO (API 3 - MyMemory Translator)
            async function traduzir(texto) {
                if (!texto) return '';
                texto = texto.substring(0, 500); 
                const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(texto)}&langpair=en|pt`;
                try {
                    let resposta = await fetch(url);
                    let js = await resposta.json();
                    return js.responseData.translatedText;
                } catch(err) {
                    return texto; 
                }
            }

            // 4. API Star Wars (SWAPI)
            async function buscarSW() {
                const painel = document.querySelector('#mostraSW');
                const planetaId = Math.floor(Math.random() * 6) + 1; 
                const url = `https://swapi.dev/api/planets/${planetaId}/`;

                try {
                    let resposta = await fetch(url);
                    if (!resposta.ok) throw new Error(`Erro na chamada SWAPI: ${resposta.status}`);
                    let js = await resposta.json();
                    
                    const climaTraduzido = await traduzir(js.climate);
                    const terrenoTraduzido = await traduzir(js.terrain);
                    
                    painel.innerHTML = `
                        <h3>Planeta: ${js.name}</h3>
                        <p><strong>Clima:</strong> ${climaTraduzido}</p>
                        <p><strong>Terreno:</strong> ${terrenoTraduzido}</p>
                        <p><strong>Popula√ß√£o:</strong> ${js.population !== 'unknown' ? new Intl.NumberFormat('pt-BR').format(js.population) : 'Desconhecida'}</p>
                    `;
                } catch (err) {
                    painel.innerHTML = `<h3 style="color:red;">Erro ao buscar dado Star Wars: ${err.message}</h3>`;
                }
            }
            document.querySelector('#buscarSW').addEventListener('click', buscarSW);
            
            // 5. API Launch Library 2 (Pr√≥ximo Lan√ßamento)
            async function buscarProximoLancamento() {
                const painel = document.querySelector('#mostraLancamento');
                // Endpoint para o pr√≥ximo lan√ßamento de foguete confirmado
                const url = `https://ll.thespacedevs.com/2.2.0/launch/upcoming/?limit=1`;

                try {
                    let resposta = await fetch(url);
                    if (!resposta.ok) throw new Error(`Erro na chamada Launch Library: ${resposta.status}`);
                    let js = await resposta.json();
                    
                    if (js.results.length === 0) {
                        painel.innerHTML = "<h3>Nenhum lan√ßamento futuro encontrado no momento.</h3>";
                        return;
                    }
                    
                    const launch = js.results[0];
                    const dataPrevista = new Date(launch.net).toLocaleString('pt-BR', { dateStyle: 'full', timeStyle: 'short' });
                    
                    const nomeMissao = launch.mission ? launch.mission.name : 'Nome da Miss√£o Indispon√≠vel';
                    const descricaoTraduzida = await traduzir(launch.mission ? launch.mission.description : 'Detalhes indispon√≠veis.');

                    painel.innerHTML = `
                        <h3>${launch.name}</h3>
                        <p><strong>Data Prevista:</strong> ${dataPrevista}</p>
                        <p><strong>Foguete:</strong> ${launch.rocket.configuration.full_name}</p>
                        <p><strong>Miss√£o:</strong> ${nomeMissao}</p>
                        <p><strong>Descri√ß√£o:</strong> ${descricaoTraduzida}</p>
                        <p><strong>Local:</strong> ${launch.pad.location.name}</p>
                        <p>üîó <a href="${launch.url}" target="_blank">Ver detalhes completos</a></p>
                    `;

                } catch (err) {
                    painel.innerHTML = `<h3 style="color:red;">Erro ao buscar lan√ßamento: ${err.message}</h3>`;
                }
            }
            document.querySelector('#buscarLancamento').addEventListener('click', buscarProximoLancamento);
            
            // 6. API Spaceflight News (Not√≠cias)
            async function buscarNoticiasEspaciais() {
                const painel = document.querySelector('#mostraNoticias');
                // Endpoint para o artigo mais recente (limit=1)
                const url = `https://api.spaceflightnewsapi.net/v4/articles/?limit=1`;

                try {
                    let resposta = await fetch(url);
                    if (!resposta.ok) throw new Error(`Erro na chamada Spaceflight News: ${resposta.status}`);
                    let js = await resposta.json();
                    
                    if (js.results.length === 0) {
                        painel.innerHTML = "<h3>Nenhuma not√≠cia encontrada no momento.</h3>";
                        return;
                    }
                    
                    const artigo = js.results[0];
                    const tituloTraduzido = await traduzir(artigo.title);
                    const resumoTraduzido = await traduzir(artigo.summary);
                    
                    painel.innerHTML = `
                        <h3>${tituloTraduzido}</h3>
                        <img src="${artigo.image_url}" alt="${tituloTraduzido}" style="max-width: 100%; height: auto; border-radius: 8px;">
                        <p><strong>Resumo:</strong> ${resumoTraduzido}</p>
                        <p><strong>Fonte:</strong> ${artigo.news_site}</p>
                        <p>üîó <a href="${artigo.url}" target="_blank">Leia o artigo completo</a></p>
                    `;

                } catch (err) {
                    painel.innerHTML = `<h3 style="color:red;">Erro ao buscar not√≠cias: ${err.message}</h3>`;
                }
            }
            document.querySelector('#buscarNoticias').addEventListener('click', buscarNoticiasEspaciais);
        </script>
    </main>

    <footer>
        <p>¬© 2025 Trabalho API - Todos os direitos reservados.</p>
    </footer>

</body>
</html>